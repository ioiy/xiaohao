# 🧙‍♂️ Traffic Wizard Ultimate (流量保号助手 - 旗舰交互版)

![License](https://img.shields.io/badge/License-MIT-blue.svg)
![Language](https://img.shields.io/badge/Language-Bash-green.svg)
![Version](https://img.shields.io/badge/Version-2.9.3-orange.svg)

**Traffic Wizard Ultimate** 是一个专为 VPS（特别是小内存 NAT VPS、Alpine 系统）设计的轻量级流量消耗脚本。它可以帮助你自动化消耗流量，防止 VPS 因闲置被服务商回收。

**v2.9.3 更新亮点**：全新扁平化主菜单、易读日志查看器（自动转换 MB）、实时网速监视器、以及更强的 CDN 更新检测机制。

---

## ✨ 核心功能

* **🖥️ 交互式仪表盘**：启动即显示内存/硬盘占用、实时流量数据、以及所有开关的当前状态。
* **🕹️ 扁平化主菜单**：智能模式、限速、流量波动、IP偏好等常用开关直接挂载主菜单，点击即切换，无需进入二级菜单。
* **📊 易读日志系统 (Log Viewer)**：内置日志翻译器，自动将原始字节数据转换为 MB 显示，并标记任务状态。
* **📈 实时网速监视 (Live Speed)**：集成 `vnstat -l`，在终端内实时展示当前的上传/下载速率。
* **🧠 智能补课模式 (Smart Mode)**：设定每月目标（如 10GB），脚本运行前自动计算。若本月已达标，自动停止运行，防止超额扣费。
* **🌊 拟人化流量波动 (Jitter)**：流量消耗在设定值的 ±10% 之间随机浮动，规避流量曲线死板被检测的风险。
* **🛡️ 双模统计 (Hybrid Mode)**：支持 `vnstat` (精准/重启不丢) 和 `内核读取` (无依赖/重启清零) 双模式自动切换。
* **🔗 自定义链接**：支持用户添加自定义下载节点，与内置的大厂 CDN 节点混合使用。
* **🧹 系统工具箱**：包含一键安装依赖、重置统计、强制停止进程 (Kill Switch)、完全卸载等运维功能。

---

## 📥 一键安装/使用

推荐使用 `root` 用户运行：

```bash
curl -sS -O https://raw.githubusercontent.com/ioiy/xiaohao/main/xiaohao.sh && chmod +x xiaohao.sh && ./xiaohao.sh
```

## 如果服务器在国内或连接 GitHub 困难，请使用加速源：

```bash
curl -sS -O https://ghproxy.net/https://raw.githubusercontent.com/ioiy/xiaohao/main/xiaohao.sh && chmod +x xiaohao.sh && ./xiaohao.sh
```

🎮 菜单功能说明
脚本采用了全新的交互逻辑：

🚀 主功能区
[1] 立即运行：手动输入流量数值（MB），立即执行下载任务。

[2] 计划任务：

固定时间：例如“每天凌晨 3 点跑 500MB”。

随机时间：每天 0 点启动，随机沉睡 0~18 小时后开始跑，极致保号。

任务可视化：菜单顶部会自动翻译并显示当前已设定的任务。

🎛️ 快捷开关 (点击即修改)
[3] 智能模式：开启后，超过月度目标（默认10GB）自动停止脚本。

[4] 流量波动：开启后，实际跑的流量会随机增减 10%。

[5] 速度限制：设置 curl 最大下载速度（如 2M），模拟看视频。

[6] IP 偏好：强制 IPv4 / IPv6 或自动。

[7] 自定义链接：添加你自己的下载源。

🛠️ 系统工具 (选项 8)
进入二级菜单后可使用：

配置 Telegram Bot：设置消息推送。

一键安装 vnstat：推荐安装，获得精准统计。

实时网速监视：查看当前网卡吞吐量。

查看运行日志：查看最近 10 条运行记录（已自动格式化）。

停止当前运行：紧急停止所有正在后台运行的脚本进程。

彻底卸载：清理所有文件和任务。

⚙️ 配置文件
脚本会自动在用户目录下生成隐藏配置文件，升级脚本不会丢失配置：

配置文件：~/.traffic_wizard.conf

运行日志：~/.traffic_wizard.log

📋 常见问题
Q: 更新后检测不到新版本？ A: v2.9.2+ 版本已修复此问题，引入了时间戳防缓存机制。旧版本用户请等待 CDN 缓存刷新（约 10 分钟）或手动重新下载脚本。

Q: 为什么日志里以前是数字，现在能看懂了？ A: v2.9.3 更新了日志查看器，它会自动读取日志文件中的字节数，并除以 1024/1024 换算成 MB 显示给用户。

Q: 智能模式提示“未安装 vnstat”？ A: 智能模式依赖 vnstat 来获取重启后不丢失的总流量数据。请在“系统工具”中选择“一键安装 vnstat”。

⚠️ 免责声明
本脚本仅用于 VPS 流量消耗测试或保号目的。

请勿在严禁跑流量的商家（如部分工单明确禁止的商家）上使用。

作者不对使用本脚本产生的任何后果（如流量超额扣费、VPS 被封禁等）负责。

Star ⭐ This Repository if it helps you!
